!function(e){function t(e){var t=document.createElement("div");return t.innerHTML=e,t.firstChild.data}function a(e,a,r){var i=document.createElementNS("http://www.w3.org/2000/svg",e);for(var l in a)i.setAttribute(l,a[l]);return r&&(i.textContent=t(r)),i}var r="#999",i="#6bb8b6";prettyNumber=function(e){return exp_number=e.toExponential(),notation_parts=exp_number.split("e"),notation=notation_parts[1],e>=1e9?(notation_string="b",number_part=e/1e9):e>=1e6?(notation_string="m",number_part=e/1e6):e>=1e3?(notation_string="k",number_part=e/1e3):(notation_string="",number_part=e),number_part<10?number_part=Math.round(10*number_part)/10:number_part=Math.round(number_part),number_part+notation_string},e.fn.drawDonut=function(t,i){var l,s,n,o=e(this),p=i.has_key,c=i.has_key?200:100,d=100,h=i.colors,u=c/2,_=d/2,v=Math.min(u,_),f=i.donut_thickness.indexOf("%")>-1?2*v*parseInt(i.donut_thickness)/100:parseInt(i.donut_thickness),g=v-f,m=(i.background_color||"#fff",i.full_donut),y=i.title,x=i.number_decorator||"",w=i.no_text||!1,k=i.goal_value,M=i.goal_value_text||"Remaining",b=i.rounded||!1,j=i.no_tip||!1,L=Math.cos,P=Math.sin,C=Math.PI,I=m?2*C:1.5*C,A=e('<svg width="100%" height="100%" viewBox="0, 0, '+c+", "+d+'" xmlns="http://www.w3.org/2000/svg"></svg>').appendTo(o),N=[],T=0;"undefined"!=typeof i.start_angle?(l=i.start_angle,s=v+v*L(l),n=v-v*P(l)):(l=m?3*C/2:5*C/4,s=m?v:v-v*L(C/4),n=m?2*v:v+v*P(C/4));for(var O=0;O<t.length;O++)T+=t[O].value;var Z=T,B=!1;if(k&&k>T?(t.push({name:M,value:k-T}),0==T&&(B=!0),T=k):1==t.length&&m&&(B=!0),T>0)for(var O=0;O<t.length;O++){var H,W,X=t[O],Y=X.value/T*I,z=v+v*L(l-Y),E=v-v*P(l-Y),S=v+g*L(l-Y),D=v-g*P(l-Y),F=h[O%h.length];Y>=C?(H="0 1 1",W="0 1 0"):(H="0 0 1",W="0 0 0");var Q,R=0!=O||m?"0 0 0":"0 0 1";if(B&&m&&X.value>0)var q=a("circle",{cx:v,cy:v,r:g+f/2,stroke:F,"stroke-width":f,fill:"none","data-title":X.name,"data-value":X.value,"class":"graph_piece"});else{Q=b?["M",s,n,"A",v,v,H,z,E,"A",f/2,f/2,"0 1 1",S,D,"A",g,g,W,v+g*L(l),v-g*P(l),"A",f/2,f/2,R,s,n,"Z"]:["M",s,n,"A",v,v,H,z,E,"L",S,D,"A",g,g,W,v+g*L(l),v-g*P(l),"L",s,n,"Z"];var q=a("path",{d:Q.join(" "),fill:F,"data-title":X.name,"data-value":X.value,"class":"graph_piece"})}A.append(q),s=z,n=E,l=l-Y>0?(l-Y)%(2*C):l-Y+2*C,N.push({color:F,title:X.name,percentage:Math.round(100*(X.value/T))})}if(!w)if(m)var G=a("text",{x:v,y:v,"text-anchor":"middle","class":"center_large"},prettyNumber(Z)+x),J=a("text",{x:v,y:v+g/4,fill:r,"text-anchor":"middle","class":"center_small"},y);else var G=a("text",{x:v,y:v+3*g/4+f/2,"text-anchor":"middle","class":"center_large"},prettyNumber(Z)+x),J=a("text",{x:v,y:2*v-f/2,fill:r,"text-anchor":"middle","class":"center_small"},y);if(A.append(G),A.append(J),p)for(var K=area_height/N.length,U=Math.min(5,K),O=0;O<N.length;O++){var V=N[O],$=a("circle",{cx:u+2*U,cy:O*K+U,r:U,fill:V.color,"class":"key_circle"}),ee=a("text",{x:u+4*U,y:O*K+1.5*U,fill:r,"class":"key_text"},V.title+" ("+V.percentage+"%)");A.append($),A.append(ee)}if(!j){var te=e('<div class="chart_tip"><span class="title"></span><span class="value"></span></div>').appendTo("body");o.on("mouseover","path.graph_piece, circle.graph_piece",function(t){te.find("span.title").html(e(this).data("title")),te.find("span.value").text(prettyNumber(e(this).data("value"))+x),te.show()}),o.on("mouseleave","path.graph_piece, circle.graph_piece",function(e){te.hide()}),o.on("mousemove","path.graph_piece, circle.graph_piece",function(e){te.css({left:e.pageX-te.outerWidth()/2+"px",top:e.pageY-te.outerHeight(!0)+"px"})})}return o.addClass("chart").addClass("donut_chart"),p&&o.addClass("has_key"),o},e.fn.drawPie=function(t,i){for(var l=e(this),s=i.has_key?200:100,n=100,o=i.colors,p=s/2,c=n/2,d=i.title,h=i.has_key,u=d?10:0,_=Math.min(p,c-u),v=Math.cos,f=Math.sin,g=Math.PI,m=2*g,y=e('<svg width="100%" height="100%" viewBox="0, 0, '+s+", "+n+'" xmlns="http://www.w3.org/2000/svg"></svg>').appendTo(l),x=!1,w=[],k=0,M=_,b=u+_+_,j=3*g/2,L=0;L<t.length;L++)k+=t[L].value;if(1==t.length&&(x=!0),k>0)for(var L=0;L<t.length;L++){var P,C,I=t[L],A=I.value/k*m,N=_+_*v(j-A),T=u+_-_*f(j-A),O=o[L%o.length];if(x=I.value==k?!0:!1,j>g/2&&3*g/2>=j?A>=g?(P="0 1 1",C="0 1 0"):(P="0 0 1",C="0 0 0"):A>=g?(P="0 0 1",C="0 0 0"):(P="0 0 1",C="0 0 0"),I.value>0)if(x)var Z=a("circle",{cx:_,cy:_+u,r:_,fill:O,"data-title":I.name,"data-value":I.value,"class":"graph_piece"});else var B=["M",_,_+u,"L",M,b,"A",_,_,P,N,T,"L",_,_+u,"Z"],Z=a("path",{d:B.join(" "),fill:O,"data-title":I.name,"data-value":I.value,"class":"graph_piece"});y.append(Z),M=N,b=T,j-=A,w.push({color:O,title:I.name,percentage:Math.round(100*(I.value/k))})}if(h)for(var H=(area_height-u)/w.length,W=Math.min(5,H),L=0;L<w.length;L++){var X=w[L],Y=a("circle",{cx:p+2*W,cy:u+L*H+W,r:W,fill:X.color,"class":"key_circle"}),z=a("text",{x:p+4*W,y:u+L*H+1.5*W,fill:r,"class":"key_text"},X.title+" ("+X.percentage+"%)");y.append(Y),y.append(z)}if(d){var E=a("text",{x:s/2,y:5,fill:r,"text-anchor":"middle","class":"key_text"},d);y.append(E)}var S=e('<div class="chart_tip"><span class="title"></span><span class="value"></span></div>').appendTo("body");return l.on("mouseover","path.graph_piece, circle.graph_piece",function(t){S.find("span.title").html(e(this).data("title")),S.find("span.value").text(prettyNumber(e(this).data("value"))),S.show()}),l.on("mouseleave","path.graph_piece, circle.graph_piece",function(e){S.hide()}),l.on("mousemove","path.graph_piece, circle.graph_piece",function(e){S.css({left:e.pageX-S.outerWidth()/2+"px",top:e.pageY-S.outerHeight(!0)+"px"})}),l.addClass("chart").addClass("pie_chart"),h&&l.addClass("has_key"),l},e.fn.drawSkew=function(t,i){function l(e,t){var a="object"==typeof e.category?e.category.name:e.category,r="object"==typeof t.category?t.category.name:t.category;return R.indexOf(a)<R.indexOf(r)?-1:R.indexOf(a)>R.indexOf(r)?1:0}var s=e(this),n=i.has_key?200:100,o=100,p=i.colors,c=i.border_color,d=i.data_max||10,h=i.show_fit;fit_master=i.fit_master||0,fit_comparison=(fit_master+1)%2,title=i.title,has_key=i.has_key,edge_tooltips=i.edge_tooltips||!1,categories=i.categories||!1,categories_colors=i.categories_colors,dot_radius=i.dot_radius||1.5,offset_top=title?10:2*dot_radius,offset_bottom=h?10:2*dot_radius,center_x=n/2,center_y=o/2,inner_radius=Math.min(center_x-2*dot_radius,center_y-(offset_top+offset_bottom)/2),outer_radius=inner_radius+2*dot_radius,start_x=i.has_key?inner_radius+dot_radius:center_x,start_y=inner_radius+offset_top,cos=Math.cos,sin=Math.sin,PI=Math.PI,total_radians=2*PI;var u=e('<svg width="100%" height="100%" viewBox="0, 0, '+n+", "+o+'" xmlns="http://www.w3.org/2000/svg"></svg>').appendTo(s),_=a("circle",{cx:start_x,cy:start_y,r:inner_radius,stroke:c,"stroke-width":"0.5%",fill:"none"});u.append(_);for(var v=[],f=t[0].values.length,g=2*PI/f,m="",y=1*PI/2,x=0,w=[],k=[],M={},b=0,j=0;j<t[0].values.length;j++){var L=t[0].values[j],P=t[0].title;if(categories){if("string"==typeof L.category)var C=L.category,I="";else if("object"==typeof L.category)var C=L.category.name,I=L.category.subtitle;C in M?M[C].length+=1:(M[C]={length:1,color:categories_colors[b%categories_colors.length],value:I},b++)}h&&2==t.length&&(x+=1-Math.max(t[fit_master].values[j].value-t[fit_comparison].values[j].value,0)/d)}if(categories&&M){var A=y+PI/f,N=start_x+outer_radius*cos(A);category_start_y=start_y-outer_radius*sin(A);for(var C in M)if(M.hasOwnProperty(C)){var T,O,Z=M[C],B=Z.length/f*total_radians,H=start_x+outer_radius*cos(A-B),W=start_y-outer_radius*sin(A-B),X=start_x+inner_radius*cos(A-B),Y=start_y-inner_radius*sin(A-B),z=Z.color;B>=PI?(T="0 1 1",O="0 1 0"):(T="0 0 1",O="0 0 0");var E;if(1==b)var S=a("circle",{cx:start_x,cy:start_y,r:inner_radius+dot_radius,stroke:z,"stroke-width":2*dot_radius,fill:"none","data-title":C,"data-value":Z.value,"class":"graph_piece"});else{E=["M",N,category_start_y,"A",outer_radius,outer_radius,T,H,W,"L",X,Y,"A",inner_radius,inner_radius,O,start_x+inner_radius*cos(A),start_y-inner_radius*sin(A),"L",N,category_start_y,"Z"];var S=a("path",{d:E.join(" "),fill:z,"data-title":C,"data-value":Z.value,"class":"graph_piece"})}u.append(S),N=H,category_start_y=W,A=A-B>0?(A-B)%(2*PI):A-B+2*PI}}for(var D=0;D<t.length;D++){var m=[],P=t[D].title,F=y,Q=t[D].values;if(categories&&M){var R=Object.keys(M);Q=Q.sort(l)}for(var j=0;j<Q.length;j++){var L=Q[j],q=start_x+inner_radius*L.value/d*cos(F),G=start_y-inner_radius*L.value/d*sin(F),z=p[D%p.length],J=P+": "+L.value+"/"+d;if(L.hasOwnProperty("tooltip_value")&&(J=L.tooltip_value.constructor==Array?L.tooltip_value.join(", "):L.tooltip_value),m.push(q+","+G),F-=g,edge_tooltips)w[j]?w[j].push(J):w[j]=[J];else{var K=a("circle",{cx:q,cy:G,r:dot_radius,fill:z,"data-title":L.name,"data-value":J,"class":"graph_piece"});k.push(K)}}var S=a("polygon",{points:m.join(" "),fill:z,"fill-opacity":.5,stroke:z,"stroke-width":"0.5%","data-title":L.name,"data-value":L.value,"class":"graph_piece"});if(u.append(S),!edge_tooltips)for(var j=0;j<k.length;j++)u.append(k[j]);v.push({color:z,title:t[D].title})}if(edge_tooltips)for(var U=y,j=0;j<t[0].values.length;j++){var L=t[0].values[j],P=t[0].title,q=start_x+inner_radius*cos(U),G=start_y-inner_radius*sin(U),S=a("circle",{cx:q,cy:G,r:dot_radius,fill:c,"data-title":L.name,"data-value":w[j].join("<br/>"),"class":"graph_piece"});u.append(S),U+=g}if(has_key)for(var V=(area_height-offset_top)/v.length,$=Math.min(5,V),D=0;D<v.length;D++){var ee=v[D],te=a("circle",{cx:center_x+2*$,cy:offset_top+D*V+$,r:$,fill:ee.color,"class":"key_circle"}),ae=a("text",{x:center_x+4*$,y:offset_top+D*V+1.5*$,fill:r,"class":"key_text"},ee.title);u.append(te),u.append(ae)}if(title){var re=a("text",{x:n/2,y:5,fill:r,"text-anchor":"middle","class":"key_text"},title);u.append(re)}if(h){var ie=prettyNumber(100*x/f),le="Fit: "+ie+"%",se=a("text",{x:n/2,y:o-2,fill:r,"text-anchor":"middle","class":"key_text"},le);u.append(se)}var ne=e('<div class="chart_tip"><span class="title"></span><span class="value"></span></div>').appendTo("body");return s.on("mouseover","path.graph_piece, circle.graph_piece",function(t){ne.find("span.title").html(e(this).data("title")),e(this).data("value")&&!isNaN(e(this).data("value"))?ne.find("span.value").text(prettyNumber(e(this).data("value"))):ne.find("span.value").html(e(this).data("value")),ne.show()}),s.on("mouseleave","path.graph_piece, circle.graph_piece",function(e){ne.hide()}),s.on("mousemove","path.graph_piece, circle.graph_piece",function(e){ne.css({left:e.pageX-ne.outerWidth()/2+"px",top:e.pageY-ne.outerHeight(!0)+"px"})}),s.addClass("chart").addClass("skew_chart"),has_key&&s.addClass("has_key"),s},e.fn.drawBar=function(t,l){for(var s,n=e(this),o=l.aspect_ratio?l.aspect_ratio:2,p=100*o,c=100,d=parseInt(l.bar_spacing),h=l.colors,u=(l.background_color||"#fff",l.title),_=l.hover,v=l.rounded_tops,f=l.average_line,g="undefined"==typeof l.goal_value?null:l.goal_value,m="undefined"==typeof l.height_adjustment?0:l.height_adjustment,y=(Math.cos,Math.sin,Math.PI,e('<svg width="100%" height="100%" viewBox="0, 0, '+p+", "+c+'" xmlns="http://www.w3.org/2000/svg"></svg>').appendTo(n)),x=f||null!==g?16:0,w=f||null!==g?8:0,k=p-x,M=_&&!u?c:c-10,b=M-10,j=0,L=1+m,P=p-k+d/2,C=M,I=(k-t.length*d)/t.length,A=0;A<t.length;A++)j+=t[A].value,t[A].value+m>L&&(L=t[A].value+m);if(f||null!==g){var N;f?(s=j/t.length,N=b*(s+m)/L):(s=g,N=b*(g+m)/L);var T=a("rect",{x:p-k,y:C-N,width:k,height:N,fill:"rgba(0, 0, 0, 0.1)"});y.append(T);var O=["M",p-k,C-N,"L",p-k-w/2,C-N+w/2,"L",0,C-N+w/2,"L",0,C-N-w/2,"L",x-w/2,C-N-w/2,"Z"],Z=a("path",{d:O.join(" "),fill:i,"class":"goal_indicator"});y.append(Z);var B=a("text",{x:(x-w/2)/2,y:C-N+w/2-2,"text-anchor":"middle",fill:"#fff","class":"goal_indicator_text"},prettyNumber(s));y.append(B)}if("undefined"!=typeof s)for(var A=0;A<t.length;A++){var H=t[A],W=b*Math.min(H.value+m,s+m)/L,X=b*(H.value+m)/L,Y=h[0],z=h[h.length-1],E=_?"graph_piece":"";if(X>W){var S=C-W,D=X-W,F=["M",P,S,"L",P,S-D+Math.min(I/2,D),"A",I/2,Math.min(I/2,D),"0 0 1",P+I,S-D+Math.min(I/2,D),"L",P+I,S,"Z"],Q=a("path",{d:F.join(" "),fill:z,"data-title":H.name,"data-value":H.value,"class":E});y.append(Q)}var R=["M",P,C,"L",P,C-W,"L",P+I,C-W,"L",P+I,C,"Z"],q=a("path",{d:R.join(" "),fill:Y,"data-title":H.name,"data-value":H.value,"class":E});if(y.append(q),!_){var G=a("text",{x:P+I/2,y:C-X-1,fill:r,"text-anchor":"middle","class":"key_text"},prettyNumber(H.value)),J=a("text",{x:P+I/2,y:c-1,fill:r,"text-anchor":"middle","class":"key_text"},H.name);y.append(G),y.append(J)}P+=I+d}else for(var A=0;A<t.length;A++){var H=t[A],X=b*(H.value+m)/L,K=h[A%h.length],E=_?"graph_piece":"";if(v)var U=["M",P,C,"L",P,C-X+Math.min(I/2,X),"A",I/2,Math.min(I/2,X),"0 0 1",P+I,C-X+Math.min(I/2,X),"L",P+I,C,"Z"];else var U=["M",P,C,"L",P,C-X,"L",P+I,C-X,"L",P+I,C,"Z"];var V=a("path",{d:U.join(" "),fill:K,"data-title":H.name,"data-value":H.value,"class":E});if(X>0&&y.append(V),!_){var G=a("text",{x:P+I/2,y:C-X-1,fill:r,"text-anchor":"middle","class":"key_text"},prettyNumber(H.value)),J=a("text",{x:P+I/2,y:c-1,fill:r,"text-anchor":"middle","class":"key_text"},H.name);y.append(G),y.append(J)}P+=I+d}if(_&&u)var $=a("text",{x:p/2,y:c-2,fill:r,"text-anchor":"middle","class":"key_text"},u);if(y.append($),_){var ee=e('<div class="chart_tip"><span class="title"></span><span class="value"></span></div>').appendTo("body");n.on("mouseover","path.graph_piece",function(t){ee.find("span.title").html(e(this).data("title")),ee.find("span.value").text(prettyNumber(e(this).data("value"))),ee.show()}),n.on("mouseleave","path.graph_piece",function(e){ee.hide()}),n.on("mousemove","path.graph_piece",function(e){ee.css({left:e.pageX-ee.outerWidth()/2+"px",top:e.pageY-ee.outerHeight(!0)+"px"})})}return n.addClass("chart").addClass("bar_chart"),n},e.fn.drawLine=function(t,i){var l=e(this),s=i.aspect_ratio?i.aspect_ratio:2,n=100*s,o=100,p=0,c=i.colors,d="undefined"==typeof i.show_area_color?!0:i.show_area_color;background_color=i.background_color||"#fff",title=i.title,hover=i.hover,dot_radius=i.dot_radius||1.5,separate_scales="undefined"==typeof i.separate_scales?!1:i.separate_scales,zoom_y="undefined"==typeof i.zoom_y?0:i.zoom_y,height_adjustment="undefined"==typeof i.height_adjustment?1:i.height_adjustment,has_key=i.has_key||!1,cos=Math.cos,sin=Math.sin,PI=Math.PI;for(var h=e('<svg width="100%" height="100%" viewBox="0, 0, '+n+", "+o+'" xmlns="http://www.w3.org/2000/svg"></svg>').appendTo(l),u=has_key?n-75-2*dot_radius:n-2*dot_radius,_=hover&&!title?o:o-10,v=_-10,f=null,g=null,m=[],y=[],x=[],w=0;w<t.length;w++){m.push(null),y.push(null);for(var M=t[w].hasOwnProperty("values")?t[w].values:t[w],b=0;b<M.length;b++)(null==f||M[b].value>f)&&(f=M[b].value),(null==g||M[b].value<g)&&(g=M[b].value),(null==m[w]||M[b].value>m[w])&&(m[w]=M[b].value),(null==y[w]||M[b].value<y[w])&&(y[w]=M[b].value)}height_adjustment=Math.max(-1*g,height_adjustment),f+=height_adjustment,g+=height_adjustment;for(var j=[],w=0;w<t.length;w++)j[w]=Math.max(-1*y[w],height_adjustment),m[w]=m[w]+height_adjustment,y[w]=y[w]+height_adjustment;for(var L=[],w=0;w<t.length;w++){for(var M=t[w].hasOwnProperty("values")?t[w].values:t[w],P=M.length>1?u/(M.length-1):u,C=dot_radius,I=[],A=c[w%c.length],N=separate_scales?m[w]:f,T=separate_scales?y[w]:g,O=separate_scales?j[w]:height_adjustment,b=0;b<M.length;b++){var Z=M[b],B=C,H=_-v*(Z.value+O-T*zoom_y)/(N-T*zoom_y),W=Z.value;Z.hasOwnProperty("tooltip_value")&&(W=Z.tooltip_value.constructor==Array?Z.tooltip_value.join(", "):Z.tooltip_value),I.push(B+","+H);var X=a("circle",{cx:B,cy:H,r:dot_radius,fill:A,"data-title":Z.name,"data-value":W,"class":"graph_piece"});L.push(X),C+=P}var Y=a("polyline",{points:I.join(" "),fill:"none","fill-opacity":.5,stroke:A,"stroke-width":"0.5%"});if(h.append(Y),d){var z=dot_radius+","+_,E=dot_radius+u+","+_,S=a("polygon",{points:z+" "+I.join(" ")+" "+E,fill:A,"fill-opacity":.5});h.append(S)}x.push({color:A,title:t[w].title||title})}for(k=0;k<L.length;k++)h.append(L[k]);if(has_key){var D=Math.max(10,x.length),F=(_-p)/D,Q=Math.min(3,F/2);console.log(Q,F);for(var b=0;b<x.length;b++){var R=x[b],q=a("circle",{cx:u+2*Q,cy:p+b*F+Q,r:Q,fill:R.color,"class":"key_circle"}),G=a("text",{x:u+4*Q,y:p+b*F+1.5*Q,fill:r,"class":"key_text"},R.title);h.append(q),h.append(G)}}if(hover&&title)var J=a("text",{x:n/2,y:o-2,fill:r,"text-anchor":"middle","class":"key_text large"},title);if(h.append(J),hover){var K=e('<div class="chart_tip"><span class="title"></span><span class="value"></span></div>').appendTo("body");l.on("mouseover","polygon.graph_piece, circle.graph_piece",function(t){K.find("span.title").html(e(this).data("title")),K.find("span.value").text(e(this).data("value")),K.show()}),l.on("mouseleave","polygon.graph_piece, circle.graph_piece",function(e){K.hide()}),l.on("mousemove","polygon.graph_piece, circle.graph_piece",function(e){K.css({left:e.pageX-K.outerWidth()/2+"px",top:e.pageY-K.outerHeight(!0)+"px"})})}return l.addClass("chart").addClass("line_chart"),l},e.fn.drawComparison=function(t,i){for(var l=e(this),s=i.aspect_ratio?i.aspect_ratio:1,n=100*s,o=100,p=i.colors,c=i.shapes,d=(i.background_color||"#fff",i.title),h=i.hover,u=h?"graph_piece":"",_=(Math.cos,Math.sin,Math.PI,e('<svg width="100%" height="100%" viewBox="0, 0, '+n+", "+o+'" xmlns="http://www.w3.org/2000/svg"></svg>').appendTo(l)),v=0,f=0,g=0;g<t.length;g++)v+=t[g].value;var m=0,y=h&&!d?o:o-10,x=y;if(v>0)for(var g=0;g<t.length;g++){var w=t[g],k=p[g%p.length],M=c[g%c.length],b=Math.round(w.value/v*100)/100,j=w.value/v*(y/100),L=Math.round(j*n*100)/100,P=Math.round(j*o*100)/100;f+=b,f>1&&(b-=.01);var C=a("path",{d:M,fill:k,"data-title":w.name,"data-value":Math.round(100*b)+"%","class":u,transform:"translate("+m+", "+(x-P)+"), scale("+j+")"});if(_.append(C),!h){var I=a("text",{x:m+L/2,y:x-P-1,fill:r,"text-anchor":"middle","class":"key_text large"},Math.round(100*b)+"%"),A=a("text",{x:m+L/2,y:o-1,fill:r,"text-anchor":"middle","class":"key_text"},w.name);_.append(I),_.append(A)}m+=L,d&&(m+=10/(t.length-1))}if(h&&d)var N=a("text",{x:n/2,y:o-2,fill:r,"text-anchor":"middle","class":"key_text"},d);if(_.append(N),h){var T=e('<div class="chart_tip"><span class="title"></span><span class="value"></span></div>').appendTo("body");l.on("mouseover","path.graph_piece",function(t){T.find("span.title").html(e(this).data("title")),T.find("span.value").text(e(this).data("value")),T.show()}),l.on("mouseleave","path.graph_piece",function(e){T.hide()}),l.on("mousemove","path.graph_piece",function(e){T.css({left:e.pageX-T.outerWidth()/2+"px",top:e.pageY-T.outerHeight(!0)+"px"})})}return l.addClass("chart").addClass("comparison_chart"),l}}(jQuery);
